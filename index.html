<!DOCTYPE html>
<meta charset="UTF-8">

<style>
img{
	max-width:80%;
	display:block;
}
</style>

<input type="file" id="uploads">
<img id="pics">
<p id="info"></p>

<script type="text/javascript" src="jquery.min.js"></script>
<script src="up.itorr.js"></script>

<script>
$('#uploads').change(function(){
	if(!this.files||!this.files[0]) {
		return alert('选取文件出错！');
	}

	var picfiles=this.files[0];

	if (picfiles.type.indexOf('image')!=0) {
		return alert('这不是一个图像或音频！');
	}
	
	UP(picfiles,function(pid){
		$('#info')[0].innerHTML=$('#pics')[0].src='http://ww2.sinaimg.cn/large/'+pid;
	},function(){
		alert('上传文件出错了！');
	},function(progress){
		$('#info')[0].innerHTML=progress*100+'%';
	})
});
</script>